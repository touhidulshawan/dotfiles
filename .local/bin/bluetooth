#!/usr/bin/env bash

# Author: Touhidul Shawan
# Date Created: 15-06-2023
# Date Modified: 15-06-2023

# Description
# Make my bluetooth operations little bit easier

# Usage
# Run bluetooth form terminal. Make sure you put this script to $HOME/.local/bin and it is on your PATH

blctl=bluetoothctl

# add new device
add_new_device() {
    $blctl power on
    $blctl agent on
    $blctl scan on
}

# connect a device

connect_device() {
    local device_mac=$1

    $blctl connect "$device_mac"
}

disconnect_device() {
    local device_mac=$1

    $blctl disconnect "$device_mac"
}

# my bluetooth devices
edifier="FC:E8:06:36:C2:7F"
mx701="02:C8:B0:BF:B3:8D"

# use input choice
user_input() {
    local input=$1

    case $input in
        1)
            connect_device "$edifier"
            ;;
        2)
            connect_device "$mx701"
            ;;
        3)
            read -rp "Device MAC address: " device_mac
            connect_device "$device_mac"
            ;;
        4)
            disconnect_device "$edifier"
            ;;
        5)
            disconnect_device "$mx701"
            ;;
        6)
            read -rp "Device MAC address: " device_mac
            disconnect_device "$device_mac"
            ;;
        7)
            add_new_device
            ;;
        *)
            echo "Invalid choice"
            ;;
    esac
}

printf "** Enter your choice **\n1.Connect Edifier\n2.Connect MX701\n3.Connect Device\n4.Disconnect Edifier\n5.Disconnect MX701\n6.Disconnect Device\n7.Add new device\n"

read -rp "Your choice (1/2/3/4/5/6/7): " choice

user_input "$choice"
